<!DOCTYPE html>
<!--
    
    If you Google "histogram generator" or anything along those lines, the
    search results don't really turn up anything particularly useful. This
    is a project to rectify that.

    Currently in progress.

    Might have to make Git track d3.v4 when I finally put this together
    properly, but in the meantime, hosting it off their website is (hopefully)
    fine.

-->
<head>
    <style>

    @media screen {
        body > * {
          margin: 10px;
          float: left;
        }
    }

    #histogram rect {
      fill: steelblue;
    }

    #histogram text {
      fill: steelblue;
      font: 10px sans-serif;
      text-anchor: end;
    }

    </style>
    <script src="//d3js.org/d3.v4.js" charset="utf-8"></script>
    <script>
        // From the tutorial at https://bost.ocks.org/mike/bar/2/

        function getHistogramData() {
            return document.getElementById('histogram-data')
                        .value
                        .split(/\s+/)
                        .map(parseFloat)
                        .filter((elem) => !isNaN(elem));
        }

        window.onload = () => {
            let data = getHistogramData();

            let width = 500,
                height = 500;

            let y = d3.scaleLinear()
                .domain([0, d3.max(data)])
                .range([height, 0]);

            let chart = d3.select('#histogram')
                .attr('width', width)
                .attr('height', height);

            let barWidth = width / data.length;

            let bar = chart.selectAll('g')
                .data(data)
              .enter().append('g')
                .attr('transform', (d, i) => `translate(${i * barWidth}, 0)`);

            bar.append('rect')
                .attr('width', barWidth - 1)
                .attr('y', y)
                .attr('height', (d) => height - y(d));

            bar.append('text')
                .attr('x', barWidth / 2)
                .attr('y', (d) => y(d) + 3)
                .attr('dx', '2em')
                .attr('dy', '-3em')
                .text((d) => d);

      };
</script>
</head>
<body>
    <!-- placeholder data for experimenting in textarea -->
    <textarea
        id="histogram-data"
        rows="200"
        placeholder="Your data here, one data point per line."
        >
0    
foobar
10
6e1
20
30
40
50</textarea>
    <svg id="histogram"></svg>
</body>
